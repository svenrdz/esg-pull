{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"esgpull \u00b6 esgpull is a tool that simplifies usage of the ESGF Search API for data discovery, and manages procedures related to downloading and storing files from ESGF. Features \u00b6 Search datasets esgpull includes many ways of searching for data, with facet and free-text terms together with options . Facet terms Options Free-text search Complete search Specify exact facet terms with <name>:<value> syntax: All CMIP6 datasets esgpull search project:CMIP6 Found 1539146 datasets. \u2577 \u2577 # \u2502 size \u2502 id \u2576\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2574 0 \u2502 10.9 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.3hr.hfls.gr.v2018\u2026 1 \u2502 7.9 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.3hr.clt.gr.v20181\u2026 2 \u2502 11.1 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.cfadLidars\u2026 3 \u2502 1.6 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.clmisr.gr.\u2026 4 \u2502 170.5 MB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.cllcalipso\u2026 5 \u2502 86.5 MB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.clhcalipso\u2026 6 \u2502 99.3 MB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.clmcalipso\u2026 7 \u2502 1.9 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.clcalipso.\u2026 8 \u2502 142.7 MB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.cltcalipso\u2026 9 \u2502 1.1 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.clisccp.gr\u2026 10 \u2502 683.2 MB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.jpdftaurel\u2026 11 \u2502 452.1 MB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.jpdftaurei\u2026 12 \u2502 1.0 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.parasolRef\u2026 13 \u2502 845.6 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.hus.gr.v20\u2026 14 \u2502 409.1 MB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.CFsubhr.hfss.gn.v\u2026 15 \u2502 398.2 MB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.CFsubhr.hfls.gn.v\u2026 16 \u2502 4.2 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.CFsubhr.mc.gn.v20\u2026 17 \u2502 418.1 MB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.CFsubhr.prc.gn.v2\u2026 18 \u2502 379.3 MB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.CFsubhr.huss.gn.v\u2026 19 \u2502 364.8 MB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.CFsubhr.hurs.gn.v\u2026 \u2575 \u2575 Discover possible facet values with --options <facet name> : All variables for CMIP6 datasets esgpull search project:CMIP6 --options variable_id [ { 'variable_id' : { 'abs550aer' : 3398 , 'agesno' : 3084 , ... 'zsatcalc' : 106 , 'ztp' : 4825 } } ] Narrow down the search (or options search) with free-text terms: CMIP6 variables for which both 'ocean' and 'temperature' appear in the metadata esgpull search project:CMIP6 --options variable_id \"ocean AND temperature\" [ { 'variable_id' : { 'bigthetao' : 1668 , 'bigthetaoga' : 1692 , ... 'tosga' : 434 , 'tossq' : 388 } } ] Show the first 3 datasets from CMIP6 with variable bigthetao : First 3 CMIP6 datasets with variable 'bigthetao' esgpull search project:CMIP6 variable_id:bigthetao --slice 0 :3 Found 1801 datasets. \u2577 \u2577 # \u2502 size \u2502 id \u2576\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2574 0 \u2502 22.8 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.historical.r2i1p1f2.Omon.bigtheta\u2026 1 \u2502 61.6 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.piControl.r1i1p1f2.Omon.bigthetao\u2026 2 \u2502 13.7 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-ESM2-1.piControl-spinup.r1i1p1f2.Omon.b\u2026 \u2575 \u2575 Asynchronous downloads Downloads are done concurrently (up to a maximum), maximizing retrieval speed. SQLite database Each download is recorded in a SQLite database Setup \u00b6 Run pip install esgpull to install the latest release and its dependencies. Have a look at the Installation page for more ways to install. Quickstart \u00b6 Jump directly to the Quickstart guide to get to know how to use esgpull .","title":"esgpull"},{"location":"#esgpull","text":"esgpull is a tool that simplifies usage of the ESGF Search API for data discovery, and manages procedures related to downloading and storing files from ESGF.","title":"esgpull"},{"location":"#features","text":"Search datasets esgpull includes many ways of searching for data, with facet and free-text terms together with options . Facet terms Options Free-text search Complete search Specify exact facet terms with <name>:<value> syntax: All CMIP6 datasets esgpull search project:CMIP6 Found 1539146 datasets. \u2577 \u2577 # \u2502 size \u2502 id \u2576\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2574 0 \u2502 10.9 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.3hr.hfls.gr.v2018\u2026 1 \u2502 7.9 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.3hr.clt.gr.v20181\u2026 2 \u2502 11.1 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.cfadLidars\u2026 3 \u2502 1.6 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.clmisr.gr.\u2026 4 \u2502 170.5 MB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.cllcalipso\u2026 5 \u2502 86.5 MB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.clhcalipso\u2026 6 \u2502 99.3 MB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.clmcalipso\u2026 7 \u2502 1.9 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.clcalipso.\u2026 8 \u2502 142.7 MB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.cltcalipso\u2026 9 \u2502 1.1 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.clisccp.gr\u2026 10 \u2502 683.2 MB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.jpdftaurel\u2026 11 \u2502 452.1 MB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.jpdftaurei\u2026 12 \u2502 1.0 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.parasolRef\u2026 13 \u2502 845.6 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.hus.gr.v20\u2026 14 \u2502 409.1 MB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.CFsubhr.hfss.gn.v\u2026 15 \u2502 398.2 MB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.CFsubhr.hfls.gn.v\u2026 16 \u2502 4.2 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.CFsubhr.mc.gn.v20\u2026 17 \u2502 418.1 MB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.CFsubhr.prc.gn.v2\u2026 18 \u2502 379.3 MB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.CFsubhr.huss.gn.v\u2026 19 \u2502 364.8 MB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.CFsubhr.hurs.gn.v\u2026 \u2575 \u2575 Discover possible facet values with --options <facet name> : All variables for CMIP6 datasets esgpull search project:CMIP6 --options variable_id [ { 'variable_id' : { 'abs550aer' : 3398 , 'agesno' : 3084 , ... 'zsatcalc' : 106 , 'ztp' : 4825 } } ] Narrow down the search (or options search) with free-text terms: CMIP6 variables for which both 'ocean' and 'temperature' appear in the metadata esgpull search project:CMIP6 --options variable_id \"ocean AND temperature\" [ { 'variable_id' : { 'bigthetao' : 1668 , 'bigthetaoga' : 1692 , ... 'tosga' : 434 , 'tossq' : 388 } } ] Show the first 3 datasets from CMIP6 with variable bigthetao : First 3 CMIP6 datasets with variable 'bigthetao' esgpull search project:CMIP6 variable_id:bigthetao --slice 0 :3 Found 1801 datasets. \u2577 \u2577 # \u2502 size \u2502 id \u2576\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2574 0 \u2502 22.8 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.historical.r2i1p1f2.Omon.bigtheta\u2026 1 \u2502 61.6 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.piControl.r1i1p1f2.Omon.bigthetao\u2026 2 \u2502 13.7 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-ESM2-1.piControl-spinup.r1i1p1f2.Omon.b\u2026 \u2575 \u2575 Asynchronous downloads Downloads are done concurrently (up to a maximum), maximizing retrieval speed. SQLite database Each download is recorded in a SQLite database","title":"Features"},{"location":"#setup","text":"Run pip install esgpull to install the latest release and its dependencies. Have a look at the Installation page for more ways to install.","title":"Setup"},{"location":"#quickstart","text":"Jump directly to the Quickstart guide to get to know how to use esgpull .","title":"Quickstart"},{"location":"db_schema/","text":"Avant (file-centric) \u00b6 erDiagram file { int id PK string file_id \"UNIQUE\" string dataset_id string master_id string url string version string filename string local_path string data_node string checksum string checksum_type int size enum status \"queued started done error cancelled\" json raw datetime last_updated } param { int id PK string name string value datetime last_updated } version { string version_num PK } Apres (query-centric) \u00b6 erDiagram file { int id PK string file_id \"UNIQUE\" string dataset_id string master_id string url string version string filename string local_path string data_node string checksum string checksum_type int size enum status \"queued started done error cancelled\" datetime last_updated } param { int id PK string name string value datetime last_updated } version { string version_num PK } query { int id PK int hash \"computed from select&options\" bool transient string require \"NULLABLE\" json select \"facets (extra table with links to param?)\" json options } tag { int id PK int query_id FK string value string description \"NULLABLE\" } query_file { int query_id PK int file_id PK } query ||--o{ tag: has query }o--o{ file: represents query ||--o{ query_file: \"\" file ||--o{ query_file: \"\" Exemple de queries \u00b6 - name : main options : distrib : false latest : true require : null select : ensemble : r1i1p1 project : CMIP5 realm : atmos transient : true - name : day options : {} require : main select : time_frequency : day transient : true - name : rcp26 options : {} require : main select : experiment : rcp26 time_frequency : mon variable : tasmin transient : false - name : tasmax options : {} require : day select : experiment : historical variable : tasmax transient : false - name : tasmax_monfx options : {} require : main select : time_frequency : - mon - fx variable : tasmax transient : false - name : rcp85 options : {} require : day select : experiment : rcp85 variable : - tas - ua transient : false - name : other options : {} require : null select : project : CMIP6 transient : false ========== FULL GRAPH ========== main <transient> \u2502 distrib: False \u2502 latest: True \u2502 project: CMIP5 \u2502 ensemble: r1i1p1 \u2502 realm: atmos \u251c\u2500\u2500 day <transient> \u2502 \u2502 time_frequency: day \u2502 \u251c\u2500\u2500 tasmax \u2502 \u2502 \u2502 experiment: historical \u2502 \u2502 \u2502 variable: tasmax \u2502 \u2514\u2500\u2500 rcp85 \u2502 \u2502 experiment: rcp85 \u2502 \u2502 variable: \u2502 \u2502 - tas \u2502 \u2502 - ua \u251c\u2500\u2500 rcp26 \u2502 \u2502 experiment: rcp26 \u2502 \u2502 time_frequency: mon \u2502 \u2502 variable: tasmin \u2514\u2500\u2500 tasmax_monfx \u2502 time_frequency: \u2502 - mon \u2502 - fx \u2502 variable: tasmax other \u2502 project: CMIP6 ========== SUBGRAPH FROM day ========== day <transient> [ require: main ] \u2502 time_frequency: day \u251c\u2500\u2500 tasmax \u2502 \u2502 experiment: historical \u2502 \u2502 variable: tasmax \u2514\u2500\u2500 rcp85 \u2502 experiment: rcp85 \u2502 variable: \u2502 - tas \u2502 - ua","title":"Db schema"},{"location":"db_schema/#avant-file-centric","text":"erDiagram file { int id PK string file_id \"UNIQUE\" string dataset_id string master_id string url string version string filename string local_path string data_node string checksum string checksum_type int size enum status \"queued started done error cancelled\" json raw datetime last_updated } param { int id PK string name string value datetime last_updated } version { string version_num PK }","title":"Avant (file-centric)"},{"location":"db_schema/#apres-query-centric","text":"erDiagram file { int id PK string file_id \"UNIQUE\" string dataset_id string master_id string url string version string filename string local_path string data_node string checksum string checksum_type int size enum status \"queued started done error cancelled\" datetime last_updated } param { int id PK string name string value datetime last_updated } version { string version_num PK } query { int id PK int hash \"computed from select&options\" bool transient string require \"NULLABLE\" json select \"facets (extra table with links to param?)\" json options } tag { int id PK int query_id FK string value string description \"NULLABLE\" } query_file { int query_id PK int file_id PK } query ||--o{ tag: has query }o--o{ file: represents query ||--o{ query_file: \"\" file ||--o{ query_file: \"\"","title":"Apres (query-centric)"},{"location":"db_schema/#exemple-de-queries","text":"- name : main options : distrib : false latest : true require : null select : ensemble : r1i1p1 project : CMIP5 realm : atmos transient : true - name : day options : {} require : main select : time_frequency : day transient : true - name : rcp26 options : {} require : main select : experiment : rcp26 time_frequency : mon variable : tasmin transient : false - name : tasmax options : {} require : day select : experiment : historical variable : tasmax transient : false - name : tasmax_monfx options : {} require : main select : time_frequency : - mon - fx variable : tasmax transient : false - name : rcp85 options : {} require : day select : experiment : rcp85 variable : - tas - ua transient : false - name : other options : {} require : null select : project : CMIP6 transient : false ========== FULL GRAPH ========== main <transient> \u2502 distrib: False \u2502 latest: True \u2502 project: CMIP5 \u2502 ensemble: r1i1p1 \u2502 realm: atmos \u251c\u2500\u2500 day <transient> \u2502 \u2502 time_frequency: day \u2502 \u251c\u2500\u2500 tasmax \u2502 \u2502 \u2502 experiment: historical \u2502 \u2502 \u2502 variable: tasmax \u2502 \u2514\u2500\u2500 rcp85 \u2502 \u2502 experiment: rcp85 \u2502 \u2502 variable: \u2502 \u2502 - tas \u2502 \u2502 - ua \u251c\u2500\u2500 rcp26 \u2502 \u2502 experiment: rcp26 \u2502 \u2502 time_frequency: mon \u2502 \u2502 variable: tasmin \u2514\u2500\u2500 tasmax_monfx \u2502 time_frequency: \u2502 - mon \u2502 - fx \u2502 variable: tasmax other \u2502 project: CMIP6 ========== SUBGRAPH FROM day ========== day <transient> [ require: main ] \u2502 time_frequency: day \u251c\u2500\u2500 tasmax \u2502 \u2502 experiment: historical \u2502 \u2502 variable: tasmax \u2514\u2500\u2500 rcp85 \u2502 experiment: rcp85 \u2502 variable: \u2502 - tas \u2502 - ua","title":"Exemple de queries"},{"location":"download/","text":"With esgpull , downloading files is done as a two-step process: install to fetch the files' metadata and add them to the queue, and discard those that have already been queued or downloaded previously. download start to fire a blocking shell process that downloads all queued files asynchronously. Example selection file To ease on the readability, each command throughout this page uses the following selection files. They can be found in the examples/selection_files directory. download_example_small.yaml mip_era : CMIP6 experiment_id : piControl table_id : Ofx member_id : r1i1p1f1 download_example_large.yaml experiment_id : historical member_id : r1i1p1f1 mip_era : CMIP6 table_id : Eday variable_id : ts Install \u00b6 Once a search command yields satisfying results \u2014 ideally the smallest set of files that meets needs \u2014 then downloading is trivial using an install command, since the install syntax is exactly the same as for a search command. Example search command esgpull search --selection-file download_example_small.yaml Found 13 datasets. \u2577 \u2577 # \u2502 size \u2502 id \u2576\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2574 0 \u2502 1.5 MB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.Ofx.bas\u2026 1 \u2502 1.5 MB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.Ofx.bas\u2026 2 \u2502 1.7 MB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.Ofx.hfg\u2026 3 \u2502 1.7 MB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.Ofx.hfg\u2026 4 \u2502 1.7 MB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.Ofx.hfg\u2026 5 \u2502 1.5 MB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.Ofx.are\u2026 6 \u2502 1.5 MB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.Ofx.are\u2026 7 \u2502 1.5 MB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.Ofx.are\u2026 8 \u2502 1.5 MB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.Ofx.bas\u2026 9 \u2502 1.6 MB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.Ofx.are\u2026 10 \u2502 1.5 MB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.Ofx.bas\u2026 11 \u2502 1.7 MB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.Ofx.hfg\u2026 12 \u2502 329.9 kB \u2502 CMIP6.CMIP.IPSL.IPSL-CM5A2-INCA.piControl.r1i1p1f1.Ofx.\u2026 \u2575 \u2575 Replace search by install esgpull install --selection-file download_example_small.yaml Found 16 files. Dropped 3 duplicates. Total size: 19.0 MB Continue? [Y/n]: Installed 13 new files. Search options Some search options do not work with the install command. That includes the --file to display files instead of datasets, since install assumes only files can be downloaded. Failing install command esgpull install --selection-file download_example_small.yaml --file Error: No such option: --file Download process \u00b6 After installing any number of files, downloading is simple: # Using the following example install command: esgpull install --selection-file download_example_small.yaml # Download files with: esgpull download [15:18:37] \u2713 id:1767 \u00b7 329.9 kB \u00b7 5.4 MB/s esgpull.py:202 \u2713 id:1768 \u00b7 1.5 MB \u00b7 11.4 MB/s esgpull.py:202 \u2713 id:1769 \u00b7 1.5 MB \u00b7 9.3 MB/s esgpull.py:202 [15:18:38] \u2713 id:1770 \u00b7 1.5 MB \u00b7 8.1 MB/s esgpull.py:202 \u2713 id:1771 \u00b7 1.6 MB \u00b7 6.6 MB/s esgpull.py:202 \u2713 id:1772 \u00b7 1.5 MB \u00b7 7.1 MB/s esgpull.py:202 \u2713 id:1773 \u00b7 1.5 MB \u00b7 7.2 MB/s esgpull.py:202 \u2713 id:1774 \u00b7 1.5 MB \u00b7 7.0 MB/s esgpull.py:202 \u2713 id:1775 \u00b7 1.5 MB \u00b7 6.9 MB/s esgpull.py:202 \u2713 id:1776 \u00b7 1.7 MB \u00b7 7.8 MB/s esgpull.py:202 \u2713 id:1777 \u00b7 1.7 MB \u00b7 8.1 MB/s esgpull.py:202 \u2713 id:1778 \u00b7 1.7 MB \u00b7 9.9 MB/s esgpull.py:202 \u2713 id:1779 \u00b7 1.7 MB \u00b7 11.7 MB/s esgpull.py:202 13/13 00:00 Downloaded 13 new files for a total size of 19.0 MB Configuration \u00b6 RAM usage for downloads is bounded by the following formula: RAM = Config::download.max_concurrent * Config::download.chunk_size Failed downloads \u00b6 For each failed download, their status will be set to error . Those can be put back to the download queue, by using the retry command. esgpull retry --help Usage: esgpull retry [ OPTIONS ] [[ new | queued | starting | started | pausing | paused | error | cancelled | done ]] ... Cancelled download If esgpull has been stopped with with Ctrl + C while downloading, all incomplete downloads will have the cancelled status. By default, retry will put both error and cancelled downloads back to the queue. Unexpected errors Some unexpected errors might break esgpull . In this case, the downloads will stay in a transient status starting . The retry command will not send those to the queue by default. It can still be done using either: esgpull retry starting to send only those back to the queue esgpull retry --all to send every download back to the queue (except done downloads of course)","title":"Download"},{"location":"download/#install","text":"Once a search command yields satisfying results \u2014 ideally the smallest set of files that meets needs \u2014 then downloading is trivial using an install command, since the install syntax is exactly the same as for a search command. Example search command esgpull search --selection-file download_example_small.yaml Found 13 datasets. \u2577 \u2577 # \u2502 size \u2502 id \u2576\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2574 0 \u2502 1.5 MB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.Ofx.bas\u2026 1 \u2502 1.5 MB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.Ofx.bas\u2026 2 \u2502 1.7 MB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.Ofx.hfg\u2026 3 \u2502 1.7 MB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.Ofx.hfg\u2026 4 \u2502 1.7 MB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.Ofx.hfg\u2026 5 \u2502 1.5 MB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.Ofx.are\u2026 6 \u2502 1.5 MB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.Ofx.are\u2026 7 \u2502 1.5 MB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.Ofx.are\u2026 8 \u2502 1.5 MB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.Ofx.bas\u2026 9 \u2502 1.6 MB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.Ofx.are\u2026 10 \u2502 1.5 MB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.Ofx.bas\u2026 11 \u2502 1.7 MB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.Ofx.hfg\u2026 12 \u2502 329.9 kB \u2502 CMIP6.CMIP.IPSL.IPSL-CM5A2-INCA.piControl.r1i1p1f1.Ofx.\u2026 \u2575 \u2575 Replace search by install esgpull install --selection-file download_example_small.yaml Found 16 files. Dropped 3 duplicates. Total size: 19.0 MB Continue? [Y/n]: Installed 13 new files. Search options Some search options do not work with the install command. That includes the --file to display files instead of datasets, since install assumes only files can be downloaded. Failing install command esgpull install --selection-file download_example_small.yaml --file Error: No such option: --file","title":"Install"},{"location":"download/#download-process","text":"After installing any number of files, downloading is simple: # Using the following example install command: esgpull install --selection-file download_example_small.yaml # Download files with: esgpull download [15:18:37] \u2713 id:1767 \u00b7 329.9 kB \u00b7 5.4 MB/s esgpull.py:202 \u2713 id:1768 \u00b7 1.5 MB \u00b7 11.4 MB/s esgpull.py:202 \u2713 id:1769 \u00b7 1.5 MB \u00b7 9.3 MB/s esgpull.py:202 [15:18:38] \u2713 id:1770 \u00b7 1.5 MB \u00b7 8.1 MB/s esgpull.py:202 \u2713 id:1771 \u00b7 1.6 MB \u00b7 6.6 MB/s esgpull.py:202 \u2713 id:1772 \u00b7 1.5 MB \u00b7 7.1 MB/s esgpull.py:202 \u2713 id:1773 \u00b7 1.5 MB \u00b7 7.2 MB/s esgpull.py:202 \u2713 id:1774 \u00b7 1.5 MB \u00b7 7.0 MB/s esgpull.py:202 \u2713 id:1775 \u00b7 1.5 MB \u00b7 6.9 MB/s esgpull.py:202 \u2713 id:1776 \u00b7 1.7 MB \u00b7 7.8 MB/s esgpull.py:202 \u2713 id:1777 \u00b7 1.7 MB \u00b7 8.1 MB/s esgpull.py:202 \u2713 id:1778 \u00b7 1.7 MB \u00b7 9.9 MB/s esgpull.py:202 \u2713 id:1779 \u00b7 1.7 MB \u00b7 11.7 MB/s esgpull.py:202 13/13 00:00 Downloaded 13 new files for a total size of 19.0 MB","title":"Download process"},{"location":"download/#configuration","text":"RAM usage for downloads is bounded by the following formula: RAM = Config::download.max_concurrent * Config::download.chunk_size","title":"Configuration"},{"location":"download/#failed-downloads","text":"For each failed download, their status will be set to error . Those can be put back to the download queue, by using the retry command. esgpull retry --help Usage: esgpull retry [ OPTIONS ] [[ new | queued | starting | started | pausing | paused | error | cancelled | done ]] ... Cancelled download If esgpull has been stopped with with Ctrl + C while downloading, all incomplete downloads will have the cancelled status. By default, retry will put both error and cancelled downloads back to the queue. Unexpected errors Some unexpected errors might break esgpull . In this case, the downloads will stay in a transient status starting . The retry command will not send those to the queue by default. It can still be done using either: esgpull retry starting to send only those back to the queue esgpull retry --all to send every download back to the queue (except done downloads of course)","title":"Failed downloads"},{"location":"installation/","text":"This document covers a few ways to install esgpull , a necessary first step into being able search and download ESGF datasets. conda \u00b6 The recommended way to install using conda is to create a fresh environment using python >= 3.10 , then install the package with both conda-forge and ipsl channels: Install esgpull on a fresh conda environment conda create -n esgpull python = 3 .10 conda activate esgpull conda install esgpull -c conda-forge -c ipsl pip \u00b6 Run this command: Install esgpull from pip pip install https://github.com/svenrdz/esg-pull.git Initialize the database and working directories The init command sets up the directories and files required for esgpull to work correctly. It also fetches and stores the full vocabulary of facets from ESGF index nodes and store it locally. It will take a few minutes to complete but only needs to be run once. esgpull init Get the source code \u00b6 Esgpull is developed and maintained on GitHub, you can clone the public repository: git clone https://github.com/svenrdz/esg-pull.git The source can now be installed using pip : cd esg-pull python -m pip install .","title":"Installation"},{"location":"installation/#conda","text":"The recommended way to install using conda is to create a fresh environment using python >= 3.10 , then install the package with both conda-forge and ipsl channels: Install esgpull on a fresh conda environment conda create -n esgpull python = 3 .10 conda activate esgpull conda install esgpull -c conda-forge -c ipsl","title":"conda"},{"location":"installation/#pip","text":"Run this command: Install esgpull from pip pip install https://github.com/svenrdz/esg-pull.git Initialize the database and working directories The init command sets up the directories and files required for esgpull to work correctly. It also fetches and stores the full vocabulary of facets from ESGF index nodes and store it locally. It will take a few minutes to complete but only needs to be run once. esgpull init","title":"pip"},{"location":"installation/#get-the-source-code","text":"Esgpull is developed and maintained on GitHub, you can clone the public repository: git clone https://github.com/svenrdz/esg-pull.git The source can now be installed using pip : cd esg-pull python -m pip install .","title":"Get the source code"},{"location":"quickstart/","text":"esgpull is a tool that simplifies usage of the ESGF Search API for data discovery, and manages procedures related to downloading and storing files from ESGF. Before anything, make sure esgpull is correctly installed . Glossary Dataset collection of files . Described by metadata that follows its project's conventions. Facet basic element of a dataset's metadata . Pair of strings in the form name:value , equivalent to a python dictionary's item. Data discovery \u00b6 Look at the data discovery page for more information. Downloading \u00b6 Loop at the download page for more information.","title":"Quickstart"},{"location":"quickstart/#data-discovery","text":"Look at the data discovery page for more information.","title":"Data discovery"},{"location":"quickstart/#downloading","text":"Loop at the download page for more information.","title":"Downloading"},{"location":"search/","text":"There are two ways to search for one or more datasets: facet and free-text search. Both are done through the esgpull search command. Facet search \u00b6 Facet search is performed with all terms using the facet syntax <name>:<value> , for which both name and value are matched exactly. Search CMIP6 datasets esgpull search project:CMIP6 --slice 3 Found 1539146 datasets. \u2577 \u2577 # \u2502 size \u2502 id \u2576\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2574 0 \u2502 10.9 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.3hr.hfls\u2026 1 \u2502 7.9 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.3hr.clt.\u2026 2 \u2502 11.1 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.c\u2026 \u2575 \u2575 Multiple values for a facet \u00b6 Multiples values can be used, either by specifying the facet name for every value, or by separating each value with a , comma. Single variable c2h2 esgpull search variable_id:c2h2 -0 Found 5 datasets. Single variable c2h6 esgpull search variable_id:c2h6 -0 Found 5 datasets. Both variables c2h2 and c2h6 esgpull search variable_id:c2h2 variable_id:c2h6 -0 Found 10 datasets. What facets can be used? esgpull provides a handy way to print out all facet names: esgpull facet [ 'Acknowledgement' , 'Campaign' , 'Conventions' , 'Period' , 'Science Driver' , 'access' , 'activity' , 'activity_drs' , 'activity_id' , ... ] Free-text search \u00b6 Free-text search is performed on any term not using the <name>:<value> syntax. Each term is sent to the ESGF search API, which uses Apache Solr to match results. Solr syntax Solr will always try to match any of the search terms. esgpull search surface temperature # will match either `surface` or `temperature` To make sure all the words are matched, terms must be separated with AND and written between quotes esgpull search \"surface AND temperature\" # will match BOTH `surface` and `temperature` Wildcard syntax \u00b6 A wildcard * can be used in both facet (value only) and free-text search, allowing for more controllable search results. Note that on most shells, the wildcard symbol should be inside \" quotes, to escape it from being expanded by the shell before esgpull receives any input. All initializations for areacella variable from piControl experiments esgpull search \"member_id:r1i*p1f1\" table_id:fx variable_id:areacella experiment_id:piControl Found 6 datasets. \u2577 \u2577 # \u2502 size \u2502 id \u2576\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2574 0 \u2502 28.5 kB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i2p1f1.fx.areace\u2026 1 \u2502 26.9 kB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.fx.areace\u2026 2 \u2502 26.9 kB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.fx.areace\u2026 3 \u2502 26.9 kB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.fx.areace\u2026 4 \u2502 28.6 kB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.fx.areace\u2026 5 \u2502 28.1 kB \u2502 CMIP6.CMIP.IPSL.IPSL-CM5A2-INCA.piControl.r1i1p1f1.fx.are\u2026 \u2575 \u2575 Case sensitivity \u00b6 For facet search , the case must match exactly, so project:cmip6 will give entirely different results than project:CMIP6 . In the case of free-text search , the opposite is true, case is entirely insensitive, and may lead to funky results. Selection files \u00b6 While the search command is an already powerful tool for data discovery, its limitations come up quite often. Overcoming those limitations is the primary reason for using selection files , a multi-request description syntax. With its subrequests , a selection file is conceptually similar to a single-level tree structure , for which each subrequest is a leaf that specializes the root request. The number of requests sent to ESGF after expanding the subrequests is equal to the number of subrequests . A selection file is written using either Yaml/1.0 or Json , Yaml is recommended for its human-readable syntax. Syntax Rules key/value pair \u21d2 facet search term Yaml <name> : <values> Json { \"<name>\" : \"<values>\" } query keyword \u21d2 free-text Yaml query : <free-text> Json { \"query\" : \"<free-text>\" } requests keyword \u21d2 subrequest list Yaml requests : - <request_1> - <request_2> Json { \"requests\" : [ \"<request_1>\" , \"<request_2>\" ] } subrequests accept only facets or free-text (nesting disallowed) Yaml requests : - <name_1> : <values_1> <name_2> : <values_2> query : <free-text> Json { \"requests\" : [ { \"<name_1>\" : \"<values_1>\" , \"<name_2>\" : \"<values_2>\" , \"query\" : \"<free-text>\" } ] } each subquery inherits the root request terms Yaml <name_1> : <values_1> requests : - <name_2> : <values_2> - <name_3> : <values_3> - query : <free-text> Json { \"<name_1>\" : \"<values_1>\" , \"requests\" : [ { \"<name_2>\" : \"<values_2>\" }, { \"<name_3>\" : \"<values_3>\" }, { \"query\" : \"<free-text>\" } ] } Expanded query 1 <name_1> : <values_1> <name_2> : <values_2> Expanded query 1 { \"<name_1>\" : \"<values_1>\" , \"<name_2>\" : \"<values_2>\" } Expanded query 2 <name_1> : <values_1> <name_3> : <values_3> Expanded query 2 { \"<name_1>\" : \"<values_1>\" , \"<name_3>\" : \"<values_3>\" } Expanded query 3 <name_1> : <values_1> query : <free-text> Expanded query 3 { \"<name_1>\" : \"<values_1>\" , \"query\" : \"<free-text>\" } prefixing a name with + \u21d2 append values to the root request homonym term Yaml <name_1> : <values_1> requests : - <name_1> : <values_replaced> <name_2> : <values_2> - +<name_1> : <values_appended> - <name_3> : <values_3> Json { \"<name_1>\" : \"<values_1>\" , \"requests\" : [ { \"<name_1>\" : \"<values_replaced>\" , \"<name_2>\" : \"<values_2>\" }, { \"+<name_1>\" : \"<values_appended>\" }, { \"<name_3>\" : \"<values_3>\" } ] } Expanded request 1 <name_1> : <values_replaced> <name_2> : <values_2> Expanded request 1 { \"<name_1>\" : \"<values_replaced>\" , \"<name_2>\" : \"<values_2>\" } Expanded request 2 <name_1> : <values_1>,<values_appended> Expanded request 2 { \"<name_1>\" : \"<values_1>,<values_appended>\" } Expanded request 3 <name_1> : <values_1> <name_3> : <values_3> Expanded request 3 { \"<name_1>\" : \"<values_1>\" , \"<name_3>\" : \"<values_3>\" } Selection file for IPCC experiments on surface temperatures surface_temperature.yaml query : \"surface AND temperature\" requests : - project : CMIP5 experiment : \"rcp*\" - project : CMIP6 experiment_id : \"ssp*\" Search with selection file esgpull search --selection-file surface_temperature.yaml --one Found 2346 datasets. \u2577 \u2577 # \u2502 size \u2502 id \u2576\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2574 0 \u2502 363.9 GB \u2502 cmip5.output1.CNRM-CERFACS.CNRM-CM5.rcp26.day.atmos.day.r1i1p1.v201\u2026 \u2575 \u2575","title":"Data discovery"},{"location":"search/#facet-search","text":"Facet search is performed with all terms using the facet syntax <name>:<value> , for which both name and value are matched exactly. Search CMIP6 datasets esgpull search project:CMIP6 --slice 3 Found 1539146 datasets. \u2577 \u2577 # \u2502 size \u2502 id \u2576\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2574 0 \u2502 10.9 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.3hr.hfls\u2026 1 \u2502 7.9 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.3hr.clt.\u2026 2 \u2502 11.1 GB \u2502 CMIP6.CMIP.CNRM-CERFACS.CNRM-CM6-1.amip.r1i1p1f2.E3hrPt.c\u2026 \u2575 \u2575","title":"Facet search"},{"location":"search/#multiple-values-for-a-facet","text":"Multiples values can be used, either by specifying the facet name for every value, or by separating each value with a , comma. Single variable c2h2 esgpull search variable_id:c2h2 -0 Found 5 datasets. Single variable c2h6 esgpull search variable_id:c2h6 -0 Found 5 datasets. Both variables c2h2 and c2h6 esgpull search variable_id:c2h2 variable_id:c2h6 -0 Found 10 datasets. What facets can be used? esgpull provides a handy way to print out all facet names: esgpull facet [ 'Acknowledgement' , 'Campaign' , 'Conventions' , 'Period' , 'Science Driver' , 'access' , 'activity' , 'activity_drs' , 'activity_id' , ... ]","title":"Multiple values for a facet"},{"location":"search/#free-text-search","text":"Free-text search is performed on any term not using the <name>:<value> syntax. Each term is sent to the ESGF search API, which uses Apache Solr to match results. Solr syntax Solr will always try to match any of the search terms. esgpull search surface temperature # will match either `surface` or `temperature` To make sure all the words are matched, terms must be separated with AND and written between quotes esgpull search \"surface AND temperature\" # will match BOTH `surface` and `temperature`","title":"Free-text search"},{"location":"search/#wildcard-syntax","text":"A wildcard * can be used in both facet (value only) and free-text search, allowing for more controllable search results. Note that on most shells, the wildcard symbol should be inside \" quotes, to escape it from being expanded by the shell before esgpull receives any input. All initializations for areacella variable from piControl experiments esgpull search \"member_id:r1i*p1f1\" table_id:fx variable_id:areacella experiment_id:piControl Found 6 datasets. \u2577 \u2577 # \u2502 size \u2502 id \u2576\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2574 0 \u2502 28.5 kB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i2p1f1.fx.areace\u2026 1 \u2502 26.9 kB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.fx.areace\u2026 2 \u2502 26.9 kB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.fx.areace\u2026 3 \u2502 26.9 kB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.fx.areace\u2026 4 \u2502 28.6 kB \u2502 CMIP6.CMIP.IPSL.IPSL-CM6A-LR.piControl.r1i1p1f1.fx.areace\u2026 5 \u2502 28.1 kB \u2502 CMIP6.CMIP.IPSL.IPSL-CM5A2-INCA.piControl.r1i1p1f1.fx.are\u2026 \u2575 \u2575","title":"Wildcard syntax"},{"location":"search/#case-sensitivity","text":"For facet search , the case must match exactly, so project:cmip6 will give entirely different results than project:CMIP6 . In the case of free-text search , the opposite is true, case is entirely insensitive, and may lead to funky results.","title":"Case sensitivity"},{"location":"search/#selection-files","text":"While the search command is an already powerful tool for data discovery, its limitations come up quite often. Overcoming those limitations is the primary reason for using selection files , a multi-request description syntax. With its subrequests , a selection file is conceptually similar to a single-level tree structure , for which each subrequest is a leaf that specializes the root request. The number of requests sent to ESGF after expanding the subrequests is equal to the number of subrequests . A selection file is written using either Yaml/1.0 or Json , Yaml is recommended for its human-readable syntax. Syntax Rules key/value pair \u21d2 facet search term Yaml <name> : <values> Json { \"<name>\" : \"<values>\" } query keyword \u21d2 free-text Yaml query : <free-text> Json { \"query\" : \"<free-text>\" } requests keyword \u21d2 subrequest list Yaml requests : - <request_1> - <request_2> Json { \"requests\" : [ \"<request_1>\" , \"<request_2>\" ] } subrequests accept only facets or free-text (nesting disallowed) Yaml requests : - <name_1> : <values_1> <name_2> : <values_2> query : <free-text> Json { \"requests\" : [ { \"<name_1>\" : \"<values_1>\" , \"<name_2>\" : \"<values_2>\" , \"query\" : \"<free-text>\" } ] } each subquery inherits the root request terms Yaml <name_1> : <values_1> requests : - <name_2> : <values_2> - <name_3> : <values_3> - query : <free-text> Json { \"<name_1>\" : \"<values_1>\" , \"requests\" : [ { \"<name_2>\" : \"<values_2>\" }, { \"<name_3>\" : \"<values_3>\" }, { \"query\" : \"<free-text>\" } ] } Expanded query 1 <name_1> : <values_1> <name_2> : <values_2> Expanded query 1 { \"<name_1>\" : \"<values_1>\" , \"<name_2>\" : \"<values_2>\" } Expanded query 2 <name_1> : <values_1> <name_3> : <values_3> Expanded query 2 { \"<name_1>\" : \"<values_1>\" , \"<name_3>\" : \"<values_3>\" } Expanded query 3 <name_1> : <values_1> query : <free-text> Expanded query 3 { \"<name_1>\" : \"<values_1>\" , \"query\" : \"<free-text>\" } prefixing a name with + \u21d2 append values to the root request homonym term Yaml <name_1> : <values_1> requests : - <name_1> : <values_replaced> <name_2> : <values_2> - +<name_1> : <values_appended> - <name_3> : <values_3> Json { \"<name_1>\" : \"<values_1>\" , \"requests\" : [ { \"<name_1>\" : \"<values_replaced>\" , \"<name_2>\" : \"<values_2>\" }, { \"+<name_1>\" : \"<values_appended>\" }, { \"<name_3>\" : \"<values_3>\" } ] } Expanded request 1 <name_1> : <values_replaced> <name_2> : <values_2> Expanded request 1 { \"<name_1>\" : \"<values_replaced>\" , \"<name_2>\" : \"<values_2>\" } Expanded request 2 <name_1> : <values_1>,<values_appended> Expanded request 2 { \"<name_1>\" : \"<values_1>,<values_appended>\" } Expanded request 3 <name_1> : <values_1> <name_3> : <values_3> Expanded request 3 { \"<name_1>\" : \"<values_1>\" , \"<name_3>\" : \"<values_3>\" } Selection file for IPCC experiments on surface temperatures surface_temperature.yaml query : \"surface AND temperature\" requests : - project : CMIP5 experiment : \"rcp*\" - project : CMIP6 experiment_id : \"ssp*\" Search with selection file esgpull search --selection-file surface_temperature.yaml --one Found 2346 datasets. \u2577 \u2577 # \u2502 size \u2502 id \u2576\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2574 0 \u2502 363.9 GB \u2502 cmip5.output1.CNRM-CERFACS.CNRM-CM5.rcp26.day.atmos.day.r1i1p1.v201\u2026 \u2575 \u2575","title":"Selection files"}]}